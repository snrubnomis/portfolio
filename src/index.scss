/**
 * Copyright IBM Corp. 2025
 *
 * This source code is licensed under the Apache-2.0 license found in the
 * LICENSE file in the root directory of this source tree.
 */

@use '@carbon/ibm-products/css/index.min';
@use '@carbon/react' with (
  $font-path: '@ibm/plex',
  $font-display: 'block'
);
@use '@carbon/react/scss/spacing' as *;
@use '@carbon/react/scss/theme' as *;
@use '@carbon/react/scss/themes';
@use '@carbon/react/scss/colors' as *;
@use '@carbon-labs/react-theme-settings/scss/theme-settings';

/* Importing the component styles here will load them
   before the JavaScript, which will make the page 
   not "flashing style" - everything will be at the right
   place from the start. In most case, avoid loading styles
   from the JavaScript. */
@use 'layouts/page-layout';
@use 'pages/welcome/welcome';
@use 'pages/wrapper/pageWrapper';
@use 'components/landing/landing';
@use 'components/aboutMe/aboutMe';
@use 'components/experience/experience';
@use 'components/projects/projects';

@mixin light-brand {
  --light: 'true';
  --cs-brand: #{$blue-30};
  --cs-brand-alt: #{$blue-20};
  --cs-logo-filter: invert(100%);

  background-color: $background;
  color: $text-primary;
}

@mixin dark-brand {
  --light: 'false';
  --cs-brand: #{$blue-80};
  --cs-brand-alt: #{$blue-90};
  --cs-logo-filter: initial;

  background: $background;
  color-color: $text-primary;
}

/* Theme based on data-theme-setting attribute */

// Base mixin to apply theme and brand styles
@mixin apply-theme($theme: 'light') {
  @if $theme == 'light' {
    @include theme(themes.$g10);
    @include light-brand;
  } @else {
    @include theme(themes.$g100);
    @include dark-brand;
  }
}

// Helper mixins to apply theme to root or content
@mixin apply-root-theme($theme: 'light') {
  @include apply-theme($theme);
}

@mixin apply-content-theme($theme: 'light') {
  .sb--content {
    @include apply-theme($theme);
  }
}

// System theme (no explicit setting or explicit 'system' value)
$system-selector: ':root:is(:not([data-theme-setting]), [data-theme-setting="system"])';

// Default: dark header, light content (when header-inverse=true)
#{$system-selector}[data-header-inverse='true'] {
  @include apply-root-theme('dark');
  @include apply-content-theme('light');
}

// Default: light everywhere (when header-inverse=false or not set)
#{$system-selector}:not([data-header-inverse='true']) {
  @include apply-root-theme('light');
}

// System theme with dark preference
@media (prefers-color-scheme: dark) {
  // Light header, dark content (when header-inverse=true)
  #{$system-selector}[data-header-inverse='true'] {
    @include apply-root-theme('light');
    @include apply-content-theme('dark');
  }

  // Dark everywhere (when header-inverse=false or not set)
  #{$system-selector}:not([data-header-inverse='true']) {
    @include apply-root-theme('dark');
  }
}

// Explicit light theme
:root[data-theme-setting='light'] {
  // Dark header, light content (when header-inverse=true)
  &[data-header-inverse='true'] {
    @include apply-root-theme('dark');
    @include apply-content-theme('light');
  }

  // Light everywhere (when header-inverse=false or not set)
  &:not([data-header-inverse='true']) {
    @include apply-root-theme('light');
  }
}

// Explicit dark theme
:root[data-theme-setting='dark'] {
  // Light header, dark content (when header-inverse=true)
  &[data-header-inverse='true'] {
    @include apply-root-theme('light');
    @include apply-content-theme('dark');
  }

  // Dark everywhere (when header-inverse=false or not set)
  &:not([data-header-inverse='true']) {
    @include apply-root-theme('dark');
  }
}

body {
  background-color: $background;
  block-size: calc(100% - #{$spacing-09});
}
